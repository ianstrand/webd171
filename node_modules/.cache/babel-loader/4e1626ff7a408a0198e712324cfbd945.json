{"ast":null,"code":"import _classCallCheck from \"/Users/ianstrand/Sites/webd171/lessons/week7/react-youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ianstrand/Sites/webd171/lessons/week7/react-youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/ianstrand/Sites/webd171/lessons/week7/react-youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/ianstrand/Sites/webd171/lessons/week7/react-youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ianstrand/Sites/webd171/lessons/week7/react-youtube/src/components/VideoInfoBox/VideoInfoBox.js\";\n\nimport React from 'react';\nimport './VideoInfoBox.scss';\nimport { Image, Button, Ref, Divider } from 'semantic-ui-react';\nimport Linkify from 'react-linkify';\nimport { getPublishedAtDateString } from '../../services/date/date-format';\nimport { getShortNumberString } from '../../services/number/number-format';\nvar Vi1Button = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"subscribe\",\n    color: \"youtube\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 5\n    }\n  }));\n});\nvar Vi2Button = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    compact: true,\n    onClick: _this.onToggleCollapseButtonClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }));\n});\nexport var VideoInfoBox = /*#__PURE__*/function (_React$Component) {\n  _inherits(VideoInfoBox, _React$Component);\n\n  var _super = _createSuper(VideoInfoBox);\n\n  function VideoInfoBox(props) {\n    var _this2;\n\n    _classCallCheck(this, VideoInfoBox);\n\n    _this2 = _super.call(this, props);\n\n    _this2.onToggleCollapseButtonClick = function () {\n      _this2.setState(function (prevState) {\n        return {\n          collapsed: !prevState.collapsed\n        };\n      });\n    };\n\n    _this2.wrapper = React.createRef();\n    _this2.state = {\n      collapsed: true\n    };\n    return _this2;\n  }\n\n  _createClass(VideoInfoBox, [{\n    key: \"render\",\n    value: function render() {\n      var forwardedRef = React.useRef(null);\n\n      if (!this.props.video || !this.props.channel) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 14\n          }\n        });\n      }\n\n      var descriptionParagraphs = this.getDescriptionParagraphs();\n\n      var _this$getConfig = this.getConfig(),\n          descriptionTextClass = _this$getConfig.descriptionTextClass,\n          buttonTitle = _this$getConfig.buttonTitle;\n\n      var publishedAtString = getPublishedAtDateString(this.props.video.snippet.publishedAt);\n      var channel = this.props.channel;\n      var buttonText = this.getSubscriberButtonText();\n      var channelThumbnail = channel.snippet.thumbnails.medium.url;\n      var channelTitle = channel.snippet.title;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"video-info-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        className: \"channel-image\",\n        src: channelThumbnail,\n        circular: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"video-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"channel-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }\n      }, channelTitle), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"video-publication-date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }\n      }, publishedAtString)), /*#__PURE__*/React.createElement(Ref, {\n        innerRef: forwardedRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Vi1Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }\n      }, buttonText)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"video-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: descriptionTextClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }\n      }, descriptionParagraphs), /*#__PURE__*/React.createElement(Ref, {\n        innerRef: forwardedRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Vi2Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }\n      }, buttonTitle)))), /*#__PURE__*/React.createElement(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }));\n    }\n  }, {\n    key: \"getDescriptionParagraphs\",\n    value: function getDescriptionParagraphs() {\n      var _this3 = this;\n\n      var videoDescription = this.props.video.snippet ? this.props.video.snippet.description : null;\n\n      if (!videoDescription) {\n        return null;\n      }\n\n      return videoDescription.split('\\n').map(function (paragraph, index) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          key: index,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 67\n          }\n        }, /*#__PURE__*/React.createElement(Linkify, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 82\n          }\n        }, paragraph));\n      });\n    }\n  }, {\n    key: \"getSubscriberButtonText\",\n    value: function getSubscriberButtonText() {\n      var channel = this.props.channel;\n      var parsedSubscriberCount = Number(channel.statistics.subscriberCount);\n      var subscriberCount = getShortNumberString(parsedSubscriberCount);\n      return \"Subscribe \".concat(subscriberCount);\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      var descriptionTextClass = 'collapsed';\n      var buttonTitle = 'Show More';\n\n      if (!this.state.collapsed) {\n        descriptionTextClass = 'expanded';\n        buttonTitle = 'Show Less';\n      }\n\n      return {\n        descriptionTextClass,\n        buttonTitle\n      };\n    }\n  }]);\n\n  return VideoInfoBox;\n}(React.Component);","map":{"version":3,"sources":["/Users/ianstrand/Sites/webd171/lessons/week7/react-youtube/src/components/VideoInfoBox/VideoInfoBox.js"],"names":["React","Image","Button","Ref","Divider","Linkify","getPublishedAtDateString","getShortNumberString","Vi1Button","forwardRef","props","ref","Vi2Button","onToggleCollapseButtonClick","VideoInfoBox","setState","prevState","collapsed","wrapper","createRef","state","forwardedRef","useRef","video","channel","descriptionParagraphs","getDescriptionParagraphs","getConfig","descriptionTextClass","buttonTitle","publishedAtString","snippet","publishedAt","buttonText","getSubscriberButtonText","channelThumbnail","thumbnails","medium","url","channelTitle","title","videoDescription","description","split","map","paragraph","index","parsedSubscriberCount","Number","statistics","subscriberCount","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,qBAAP;AACA,SAAQC,KAAR,EAAeC,MAAf,EAAuBC,GAAvB,EAA4BC,OAA5B,QAA0C,mBAA1C;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,SAAQC,wBAAR,QAAuC,iCAAvC;AACA,SAAQC,oBAAR,QAAmC,qCAAnC;AAEA,IAAMC,SAAS,GAAGR,KAAK,CAACS,UAAN,CAAiB,UAACC,KAAD,EAAQC,GAAR;AAAA,sBACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,WAAlB;AAA8B,IAAA,KAAK,EAAC,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADiC;AAAA,CAAjB,CAAlB;AAMA,IAAMC,SAAS,GAAGZ,KAAK,CAACS,UAAN,CAAiB,UAACC,KAAD,EAAQC,GAAR;AAAA,sBACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,OAAO,MAAf;AAAgB,IAAA,OAAO,EAAE,KAAI,CAACE,2BAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADiC;AAAA,CAAjB,CAAlB;AAMA,WAAaC,YAAb;AAAA;;AAAA;;AACE,wBAAYJ,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+BAAMA,KAAN;;AADiB,WAiDnBG,2BAjDmB,GAiDW,YAAM;AAClC,aAAKE,QAAL,CAAc,UAACC,SAAD,EAAe;AAC3B,eAAO;AACLC,UAAAA,SAAS,EAAE,CAACD,SAAS,CAACC;AADjB,SAAP;AAGD,OAJD;AAKD,KAvDkB;;AAEjB,WAAKC,OAAL,GAAelB,KAAK,CAACmB,SAAN,EAAf;AACA,WAAKC,KAAL,GAAa;AACXH,MAAAA,SAAS,EAAE;AADA,KAAb;AAHiB;AAMlB;;AAPH;AAAA;AAAA,6BASW;AACP,UAAMI,YAAY,GAAGrB,KAAK,CAACsB,MAAN,CAAa,IAAb,CAArB;;AAEA,UAAI,CAAC,KAAKZ,KAAL,CAAWa,KAAZ,IAAqB,CAAC,KAAKb,KAAL,CAAWc,OAArC,EAA8C;AAC5C,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AAED,UAAMC,qBAAqB,GAAG,KAAKC,wBAAL,EAA9B;;AAPO,4BAQqC,KAAKC,SAAL,EARrC;AAAA,UAQAC,oBARA,mBAQAA,oBARA;AAAA,UAQsBC,WARtB,mBAQsBA,WARtB;;AASP,UAAMC,iBAAiB,GAAGxB,wBAAwB,CAAC,KAAKI,KAAL,CAAWa,KAAX,CAAiBQ,OAAjB,CAAyBC,WAA1B,CAAlD;AATO,UAWAR,OAXA,GAWW,KAAKd,KAXhB,CAWAc,OAXA;AAYP,UAAMS,UAAU,GAAG,KAAKC,uBAAL,EAAnB;AACA,UAAMC,gBAAgB,GAAGX,OAAO,CAACO,OAAR,CAAgBK,UAAhB,CAA2BC,MAA3B,CAAkCC,GAA3D;AACA,UAAMC,YAAY,GAAGf,OAAO,CAACO,OAAR,CAAgBS,KAArC;AAEA,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAC,eAAjB;AAAiC,QAAA,GAAG,EAAEL,gBAAtC;AAAwD,QAAA,QAAQ,MAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+BI,YAA/B,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAyCT,iBAAzC,CAFF,CAFF,eAME,oBAAC,GAAD;AAAK,QAAA,QAAQ,EAAET,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAYY,UAAZ,CADF,CANF,eASE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAEL,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGH,qBADH,CADF,eAIE,oBAAC,GAAD;AAAK,QAAA,QAAQ,EAAEJ,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAYQ,WAAZ,CADF,CAJF,CATF,CADF,eAmBE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnBF,CADF;AAuBD;AAhDH;AAAA;AAAA,+CA0D6B;AAAA;;AACzB,UAAMY,gBAAgB,GAAG,KAAK/B,KAAL,CAAWa,KAAX,CAAiBQ,OAAjB,GAA2B,KAAKrB,KAAL,CAAWa,KAAX,CAAiBQ,OAAjB,CAAyBW,WAApD,GAAkE,IAA3F;;AACA,UAAI,CAACD,gBAAL,EAAuB;AACrB,eAAO,IAAP;AACD;;AACD,aAAOA,gBAAgB,CAACE,KAAjB,CAAuB,IAAvB,EAA6BC,GAA7B,CAAiC,UAACC,SAAD,EAAYC,KAAZ;AAAA,4BAAsB;AAAG,UAAA,GAAG,EAAEA,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAe,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAUD,SAAV,CAAf,CAAtB;AAAA,OAAjC,CAAP;AACD;AAhEH;AAAA;AAAA,8CAkE4B;AAAA,UACjBrB,OADiB,GACN,KAAKd,KADC,CACjBc,OADiB;AAExB,UAAMuB,qBAAqB,GAAGC,MAAM,CAACxB,OAAO,CAACyB,UAAR,CAAmBC,eAApB,CAApC;AACA,UAAMA,eAAe,GAAG3C,oBAAoB,CAACwC,qBAAD,CAA5C;AACA,iCAAoBG,eAApB;AACD;AAvEH;AAAA;AAAA,gCAyEc;AACV,UAAItB,oBAAoB,GAAG,WAA3B;AACA,UAAIC,WAAW,GAAG,WAAlB;;AACA,UAAI,CAAC,KAAKT,KAAL,CAAWH,SAAhB,EAA2B;AACzBW,QAAAA,oBAAoB,GAAG,UAAvB;AACAC,QAAAA,WAAW,GAAG,WAAd;AACD;;AACD,aAAO;AACLD,QAAAA,oBADK;AAELC,QAAAA;AAFK,OAAP;AAID;AApFH;;AAAA;AAAA,EAAkC7B,KAAK,CAACmD,SAAxC","sourcesContent":["import React from 'react';\nimport './VideoInfoBox.scss';\nimport {Image, Button, Ref, Divider} from 'semantic-ui-react';\nimport Linkify from 'react-linkify';\nimport {getPublishedAtDateString} from '../../services/date/date-format';\nimport {getShortNumberString} from '../../services/number/number-format';\n\nconst Vi1Button = React.forwardRef((props, ref) => (\n  <div>\n    <button className='subscribe' color='youtube' />\n  </div>\n))\n\nconst Vi2Button = React.forwardRef((props, ref) => (\n  <div>\n    <button compact onClick={this.onToggleCollapseButtonClick} />\n  </div>\n))\n\nexport class VideoInfoBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.wrapper = React.createRef();\n    this.state = {\n      collapsed: true,\n    };\n  }\n\n  render() {\n    const forwardedRef = React.useRef(null);\n    \n    if (!this.props.video || !this.props.channel) {\n      return <div/>;\n    }\n\n    const descriptionParagraphs = this.getDescriptionParagraphs();\n    const {descriptionTextClass, buttonTitle} = this.getConfig();\n    const publishedAtString = getPublishedAtDateString(this.props.video.snippet.publishedAt);\n\n    const {channel} = this.props;\n    const buttonText = this.getSubscriberButtonText();\n    const channelThumbnail = channel.snippet.thumbnails.medium.url;\n    const channelTitle = channel.snippet.title;\n\n    return (\n      <div>\n        <div className='video-info-box'>\n          <Image className='channel-image' src={channelThumbnail} circular/>\n          <div className=\"video-info\">\n            <div className='channel-name'>{channelTitle}</div>\n            <div className='video-publication-date'>{publishedAtString}</div>\n          </div>\n          <Ref innerRef={forwardedRef}>\n            <Vi1Button>{buttonText}</Vi1Button>\n          </Ref>\n          <div className=\"video-description\">\n            <div className={descriptionTextClass}>\n              {descriptionParagraphs}\n            </div>\n            <Ref innerRef={forwardedRef}>\n              <Vi2Button>{buttonTitle}</Vi2Button>\n            </Ref>\n          </div>\n        </div>\n        <Divider/>\n      </div>\n    );\n  }\n\n  onToggleCollapseButtonClick = () => {\n    this.setState((prevState) => {\n      return {\n        collapsed: !prevState.collapsed\n      };\n    });\n  };\n\n  getDescriptionParagraphs() {\n    const videoDescription = this.props.video.snippet ? this.props.video.snippet.description : null;\n    if (!videoDescription) {\n      return null;\n    }\n    return videoDescription.split('\\n').map((paragraph, index) => <p key={index}><Linkify>{paragraph}</Linkify></p>);\n  }\n\n  getSubscriberButtonText() {\n    const {channel} = this.props;\n    const parsedSubscriberCount = Number(channel.statistics.subscriberCount);\n    const subscriberCount = getShortNumberString(parsedSubscriberCount);\n    return `Subscribe ${subscriberCount}`;\n  }\n\n  getConfig() {\n    let descriptionTextClass = 'collapsed';\n    let buttonTitle = 'Show More';\n    if (!this.state.collapsed) {\n      descriptionTextClass = 'expanded';\n      buttonTitle = 'Show Less';\n    }\n    return {\n      descriptionTextClass,\n      buttonTitle\n    };\n  }\n}"]},"metadata":{},"sourceType":"module"}